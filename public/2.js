(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{120:function(t,e,a){"use strict";a.r(e);var s=a(0),r=a.n(s),o=a(11),i=(a(20),{components:{datetime:o.Datetime},props:["user"],data:function(){return{overlay:!1,errors:[],tab:null,task_type:"receive",trans_type:"train",document_base:"",upload_file:"",disabled:!1,types:[40,45,20],states:["Груженый","Порожний"],customs:["Да","Нет"],container_number:"",company:"",car_number_carriage:null,seal_number_document:null,seal_number_fact:null,note:null,datetime_submission:null,datetime_arrival:null,contractor:null,state:"",custom:null,container_type:"",orderAuto:!1}},methods:{createContainerTask:function(){var t=this;if(this.errors=[],"tab-2"===this.tab){if(this.upload_file="",this.container_number||this.errors.push("Укажите номер контейнера"),this.company||this.errors.push("Укажите клиента"),this.car_number_carriage||this.errors.push("Укажите номер вагона/машины"),this.container_type||this.errors.push("Укажите тип контейнера"),this.state||this.errors.push("Укажите статус"),0===this.errors.length){this.overlay=!0,this.disabled=!0;var e=new FormData;e.append("task_type",this.task_type),e.append("trans_type",this.trans_type),e.append("container_number",this.container_number),e.append("company",this.company),e.append("car_number_carriage",this.car_number_carriage),e.append("container_type",this.container_type),e.append("state",this.state),e.append("custom",this.custom),e.append("seal_number_document",this.seal_number_document),e.append("seal_number_fact",this.seal_number_fact),e.append("contractor",this.contractor),e.append("datetime_submission",this.datetime_submission),e.append("datetime_arrival",this.datetime_arrival),e.append("note",this.note),r.a.post("/container-terminals/container/receive-container-by-keyboard",e).then((function(t){console.log(t),window.location.href="/container-terminals"})).catch((function(e){console.log(e),t.overlay=!1,t.errors.push(e.response.data),t.disabled=!1}))}}else if(this.upload_file||this.errors.push("Укажите файл с переченем контейнеров"),0===this.errors.length){this.overlay=!0,this.disabled=!0;var a=new FormData;a.append("task_type",this.task_type),a.append("trans_type",this.trans_type),a.append("document_base",this.$refs.document_base.files[0]),a.append("upload_file",this.$refs.upload_file.files[0]),a.append("order_auto",this.orderAuto),r.a.post("/container-terminals/container/receive-container-by-operator",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){console.log(t),window.location.href="/container-terminals"})).catch((function(e){console.log(e),t.overlay=!1,t.errors.push(e.response.data)}))}},setUploadFile:function(t){1===t?this.upload_file=this.$refs.upload_file.files[0]:this.document_base=this.$refs.document_base.files[0]}},created:function(){this.file_path=this.file_receive;var t=this.user.company_id;this.task_type=2!==t?"receive":"ship",this.trans_type=2!==t?"train":"auto",this.orderAuto=2===t}}),l=a(1),n=Object(l.a)(i,(function(){var t=this,e=t._self._c;return e("v-app",[e("v-main",[e("v-container",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Тип документа")]),t._v(" "),2!==t.user.company_id?e("select",{directives:[{name:"model",rawName:"v-model",value:t.task_type,expression:"task_type"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.task_type=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:"receive"}},[t._v("Прием")]),t._v(" "),e("option",{attrs:{value:"ship"}},[t._v("Выдача")])]):t._e(),t._v(" "),2===t.user.company_id?e("select",{directives:[{name:"model",rawName:"v-model",value:t.task_type,expression:"task_type"}],staticClass:"form-control",attrs:{disabled:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.task_type=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:"ship"}},[t._v("Выдача")])]):t._e()])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Тип транспорта")]),t._v(" "),2!==t.user.company_id?e("select",{directives:[{name:"model",rawName:"v-model",value:t.trans_type,expression:"trans_type"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.trans_type=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:"train"}},[t._v("ЖД")]),t._v(" "),e("option",{attrs:{value:"auto"}},[t._v("Авто")])]):t._e(),t._v(" "),2===t.user.company_id?e("select",{directives:[{name:"model",rawName:"v-model",value:t.trans_type,expression:"trans_type"}],staticClass:"form-control",attrs:{disabled:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.trans_type=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:"auto"}},[t._v("Авто")])]):t._e()])]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Документ основание (Скан) не обязательно")]),t._v(" "),e("input",{ref:"document_base",staticClass:"form-control",attrs:{type:"file"},on:{change:function(e){return t.setUploadFile(2)}}})])]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("v-card",[e("v-tabs",{attrs:{"fixed-tabs":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e("v-tabs-slider"),t._v(" "),e("v-tab",{staticClass:"primary--text",attrs:{href:"#tab-1"}},[e("v-icon",[t._v("mdi-file")]),t._v("  Импорт из файла\n                            ")],1),t._v(" "),e("v-tab",{staticClass:"primary--text",attrs:{href:"#tab-2"}},[e("v-icon",[t._v("mdi-keyboard")]),t._v("  Ручной\n                            ")],1)],1),t._v(" "),e("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e("v-tab-item",{attrs:{value:"tab-1"}},[e("div",{staticClass:"container-fluid",staticStyle:{margin:"40px 0px"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Файл с переченем контейнеров (Эксель, xls)")]),t._v(" "),e("input",{ref:"upload_file",staticClass:"form-control",attrs:{type:"file"},on:{change:function(e){return t.setUploadFile(1)}}})])]),t._v(" "),e("div",{staticClass:"col-md-4"},["receive"===t.task_type?e("a",{staticClass:"btn btn-dark",staticStyle:{color:"#fff"},attrs:{href:"/files/kt_template.xlsx"}},[e("v-icon",{staticStyle:{color:"#fff"}},[t._v("mdi-download")]),t._v("  Скачать шаблон (прием)\n                                            ")],1):t._e(),t._v(" "),"ship"===t.task_type?e("a",{staticClass:"btn btn-dark",staticStyle:{color:"#fff"},attrs:{href:"/files/kt_template_ship.xlsx"}},[e("v-icon",{staticStyle:{color:"#fff"}},[t._v("mdi-download")]),t._v("  Скачать шаблон (выдачи)\n                                            ")],1):t._e()])])])]),t._v(" "),e("v-tab-item",{attrs:{value:"tab-2"}},[e("v-container",{staticStyle:{margin:"40px 0"}},[e("v-row",[e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("v-text-field",{attrs:{label:"Номер контейнера","hide-details":"auto"},model:{value:t.container_number,callback:function(e){t.container_number=e},expression:"container_number"}})],1)]),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("v-text-field",{attrs:{label:"Клиент","hide-details":"auto"},model:{value:t.company,callback:function(e){t.company=e},expression:"company"}})],1)]),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("v-text-field",{attrs:{label:"Номер вагона/машины","hide-details":"auto"},model:{value:t.car_number_carriage,callback:function(e){t.car_number_carriage=e},expression:"car_number_carriage"}})],1)]),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("v-select",{staticClass:"form-control",attrs:{label:"Тип контейнера",items:t.types},model:{value:t.container_type,callback:function(e){t.container_type=e},expression:"container_type"}})],1)]),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("v-select",{staticClass:"form-control",attrs:{label:"Статус",items:t.states},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1)]),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("v-select",{staticClass:"form-control",attrs:{label:"Растаможен",items:t.customs},model:{value:t.custom,callback:function(e){t.custom=e},expression:"custom"}})],1)]),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("v-text-field",{attrs:{label:"Номер пломбы по документам","hide-details":"auto"},model:{value:t.seal_number_document,callback:function(e){t.seal_number_document=e},expression:"seal_number_document"}})],1)]),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("v-text-field",{attrs:{label:"Номер пломбы по факту","hide-details":"auto"},model:{value:t.seal_number_fact,callback:function(e){t.seal_number_fact=e},expression:"seal_number_fact"}})],1)]),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("v-text-field",{attrs:{label:"Контрагент","hide-details":"auto"},model:{value:t.contractor,callback:function(e){t.contractor=e},expression:"contractor"}})],1)]),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("label",[t._v("Дата/время подачи")]),t._v(" "),e("datetime",{attrs:{"input-style":"font-size: 22px !important;color: rgba(0,0,0,.87);border: 1px solid #ccc;padding: 2px;","input-class":"",type:"datetime",format:"yyyy-MM-dd HH:mm","value-zone":"Asia/Almaty",phrases:{ok:"ОК",cancel:"Отмена"}},model:{value:t.datetime_submission,callback:function(e){t.datetime_submission=e},expression:"datetime_submission"}})],1)]),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("label",[t._v("Дата/время прибытие")]),t._v(" "),e("datetime",{attrs:{"input-style":"font-size: 22px !important;color: rgba(0,0,0,.87);border: 1px solid #ccc;padding: 2px;","input-class":"",type:"datetime",format:"yyyy-MM-dd HH:mm","value-zone":"Asia/Almaty",phrases:{ok:"ОК",cancel:"Отмена"}},model:{value:t.datetime_arrival,callback:function(e){t.datetime_arrival=e},expression:"datetime_arrival"}})],1)]),t._v(" "),e("v-col",{attrs:{cols:"4"}},[e("div",{staticClass:"form-group"},[e("v-text-field",{attrs:{label:"Примечание","hide-details":"auto"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)])],1)],1)],1)],1)],1)],1),t._v(" "),"ship"===t.task_type&&"auto"===t.trans_type?e("div",{staticClass:"col-md-12"},[e("v-checkbox",{attrs:{label:"Заявка на прием обратно (Автоматический)"},model:{value:t.orderAuto,callback:function(e){t.orderAuto=e},expression:"orderAuto"}})],1):t._e(),t._v(" "),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("button",{staticClass:"btn btn-primary",staticStyle:{float:"left"},attrs:{onclick:"window.location.href = '/container-terminals'",type:"button"}},[t._v("Назад")]),t._v(" "),e("button",{staticClass:"btn btn-success",staticStyle:{float:"right"},attrs:{disabled:t.disabled,name:"create_task",type:"button"},on:{click:function(e){return t.createContainerTask()}}},[t._v("Создать заявку")])])]),t._v(" "),e("div",{staticClass:"col-md-12"},[t.errors.length?e("p",{staticStyle:{"margin-bottom":"0px !important"}},[e("b",[t._v("Пожалуйста исправьте указанные ошибки:")]),t._v(" "),e("ul",{staticStyle:{color:"red","padding-left":"15px","list-style":"circle","text-align":"left"}},t._l(t.errors,(function(a){return e("li",[t._v(t._s(a))])})),0)]):t._e()])]),t._v(" "),e("v-overlay",{attrs:{value:t.overlay}},[e("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)],1)],1)}),[],!1,null,"2bf762fa",null);e.default=n.exports}}]);